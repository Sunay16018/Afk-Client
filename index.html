<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AFK Client - Render</title>
    <style>
        * { box-sizing: border-box; font-family: Arial, sans-serif; }
        body { background: #1a1a1a; color: #fff; margin: 0; padding: 0; }
        
        /* Men√º */
        .menu { display: flex; background: #2a2a2a; border-bottom: 2px solid #444; }
        .menu-btn { flex: 1; padding: 12px; background: none; border: none; color: #aaa; cursor: pointer; }
        .menu-btn.active { color: #4CAF50; border-bottom: 3px solid #4CAF50; }
        
        /* Sekmeler */
        .tab { display: none; padding: 20px; }
        .tab.active { display: block; }
        
        /* Giri≈ü alanlarƒ± */
        .input-group { margin-bottom: 15px; }
        input { width: 100%; padding: 10px; margin-bottom: 10px; background: #333; border: 1px solid #555; color: white; border-radius: 4px; }
        
        /* Butonlar */
        .btn { padding: 10px 20px; background: #4CAF50; color: white; border: none; border-radius: 4px; cursor: pointer; margin: 5px; }
        .btn:hover { background: #45a049; }
        .btn-red { background: #f44336; }
        .btn-red:hover { background: #d32f2f; }
        
        /* Bot listesi */
        .bot-list { margin-top: 20px; }
        .bot-item { background: #2a2a2a; padding: 12px; margin: 8px 0; border-radius: 6px; border: 1px solid #444; display: flex; justify-content: space-between; }
        .bot-item.selected { border-color: #4CAF50; background: #2a4a2a; }
        
        /* Konsol */
        #console { height: 300px; background: #000; color: #4CAF50; padding: 15px; overflow-y: auto; font-family: monospace; border-radius: 6px; margin-bottom: 15px; }
        
        /* Hareket kontrolleri */
        .movement-grid { 
            display: grid; 
            grid-template-columns: repeat(3, 1fr); 
            gap: 10px; 
            max-width: 300px; 
            margin: 20px auto; 
        }
        .move-btn { 
            padding: 20px; 
            background: #2196F3; 
            color: white; 
            border: none; 
            border-radius: 8px; 
            cursor: pointer; 
            font-size: 16px; 
        }
        .move-btn:active { background: #1976D2; }
        #jump-btn { background: #FF9800; grid-column: 2; }
        
        /* Envanter */
        .inv-grid { 
            display: grid; 
            grid-template-columns: repeat(9, 1fr); 
            gap: 5px; 
            background: #555; 
            padding: 10px; 
            border-radius: 5px; 
            max-width: 500px; 
            margin: 0 auto; 
        }
        .slot { 
            width: 50px; 
            height: 50px; 
            background: #777; 
            border: 2px solid #999; 
            display: flex; 
            align-items: center; 
            justify-content: center; 
        }
        .slot img { width: 40px; height: 40px; }
        
        /* Switch */
        .switch { position: relative; display: inline-block; width: 60px; height: 34px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background-color: #ccc; transition: .4s; border-radius: 34px; }
        .slider:before { position: absolute; content: ""; height: 26px; width: 26px; left: 4px; bottom: 4px; background-color: white; transition: .4s; border-radius: 50%; }
        input:checked + .slider { background-color: #4CAF50; }
        input:checked + .slider:before { transform: translateX(26px); }
        
        /* Durum mesajƒ± */
        #status { 
            position: fixed; 
            top: 10px; 
            right: 10px; 
            background: #333; 
            padding: 10px; 
            border-radius: 5px; 
            display: none; 
            z-index: 1000; 
        }
    </style>
</head>
<body>
    <!-- Durum mesajƒ± -->
    <div id="status"></div>
    
    <!-- Men√º -->
    <div class="menu">
        <button class="menu-btn active" onclick="showTab('bots')">BOTLAR</button>
        <button class="menu-btn" onclick="showTab('console')">KONSOL</button>
        <button class="menu-btn" onclick="showTab('movement')">HAREKET</button>
        <button class="menu-btn" onclick="showTab('inventory')">ENVANTER</button>
    </div>
    
    <!-- Botlar Sekmesi -->
    <div id="tab-bots" class="tab active">
        <h2>ü§ñ Yeni Bot Ekle</h2>
        <div class="input-group">
            <input type="text" id="host" placeholder="Sunucu IP:Port (√∂rnek: play.server.com:25565)" value="localhost:25565">
            <input type="text" id="username" placeholder="Bot Adƒ±" value="Bot_1">
            <input type="text" id="version" placeholder="Minecraft S√ºr√ºm√º" value="1.16.5">
            <button class="btn" onclick="connectBot()">‚úÖ BAƒûLAN</button>
        </div>
        
        <h3>Aktif Botlar</h3>
        <div id="bot-list" class="bot-list"></div>
    </div>
    
    <!-- Konsol Sekmesi -->
    <div id="tab-console" class="tab">
        <h2>üìü Konsol</h2>
        <div id="console">[Sƒ∞STEM] AFK Client ba≈ülatƒ±ldƒ±...</div>
        <div class="input-group">
            <input type="text" id="message" placeholder="Mesaj yazƒ±n...">
            <button class="btn" onclick="sendMessage()">üì® G√ñNDER</button>
        </div>
    </div>
    
    <!-- Hareket Sekmesi -->
    <div id="tab-movement" class="tab">
        <h2>üéÆ Hareket Kontrolleri</h2>
        <div class="movement-grid">
            <div></div>
            <button class="move-btn" onmousedown="startMove('ileri')" onmouseup="stopMove('ileri')" ontouchstart="startMove('ileri')" ontouchend="stopMove('ileri')">‚¨Ü ƒ∞LERƒ∞</button>
            <div></div>
            <button class="move-btn" onmousedown="startMove('sol')" onmouseup="stopMove('sol')" ontouchstart="startMove('sol')" ontouchend="stopMove('sol')">‚¨Ö SOL</button>
            <button class="move-btn" onmousedown="startMove('geri')" onmouseup="stopMove('geri')" ontouchstart="startMove('geri')" ontouchend="stopMove('geri')">‚¨á GERƒ∞</button>
            <button class="move-btn" onmousedown="startMove('sag')" onmouseup="stopMove('sag')" ontouchstart="startMove('sag')" ontouchend="stopMove('sag')">‚û° SAƒû</button>
            <button class="move-btn" id="jump-btn" onclick="jump()">ü¶ò ZIPLA</button>
        </div>
        <p style="text-align: center; color: #aaa; margin-top: 20px;">
            Tu≈ülara basƒ±lƒ± tutarak hareket ettirebilirsiniz
        </p>
    </div>
    
    <!-- Envanter Sekmesi -->
    <div id="tab-inventory" class="tab">
        <h2>üéí Envanter</h2>
        <div id="stats" style="text-align: center; margin: 20px; font-size: 18px;">
            ‚ù§ <span id="hp">0</span> | üçñ <span id="food">0</span>
        </div>
        <div id="inventory-grid" class="inv-grid"></div>
    </div>
    
    <!-- Socket.io -->
    <script src="/socket.io/socket.io.js"></script>
    <script>
        // Socket.io baƒülantƒ±sƒ±
        const socket = io();
        let selectedBot = '';
        
        // Baƒülantƒ± durumu
        socket.on('connect', () => {
            showStatus('‚úÖ Sunucuya baƒülandƒ±', 'success');
            console.log('Socket.io baƒülandƒ±');
        });
        
        socket.on('connect_error', (err) => {
            showStatus('‚ùå Sunucu baƒülantƒ±sƒ± yok', 'error');
            console.error('Socket.io baƒülantƒ± hatasƒ±:', err);
        });
        
        // Bot g√ºncellemeleri
        socket.on('bot-update', (data) => {
            console.log('Bot g√ºncellemesi:', data);
            
            // Bot listesini g√ºncelle
            updateBotList(data.active);
            
            // Konsolu g√ºncelle
            if (selectedBot && data.logs[selectedBot]) {
                updateConsole(data.logs[selectedBot]);
            }
            
            // Envanter ve stats
            if (selectedBot && data.botData[selectedBot]) {
                updateStats(data.botData[selectedBot]);
                updateInventory(data.botData[selectedBot].inv);
            }
        });
        
        // Hata mesajlarƒ±
        socket.on('error', (msg) => {
            showStatus('‚ùå ' + msg, 'error');
        });
        
        // Fonksiyonlar
        function showStatus(message, type) {
            const status = document.getElementById('status');
            status.textContent = message;
            status.style.display = 'block';
            status.style.background = type === 'success' ? '#4CAF50' : '#f44336';
            
            setTimeout(() => {
                status.style.display = 'none';
            }, 3000);
        }
        
        function showTab(tabName) {
            // T√ºm sekmeleri gizle
            document.querySelectorAll('.tab').forEach(tab => {
                tab.classList.remove('active');
            });
            
            // T√ºm men√º butonlarƒ±nƒ± pasif yap
            document.querySelectorAll('.menu-btn').forEach(btn => {
                btn.classList.remove('active');
            });
            
            // ƒ∞lgili sekmeyi ve butonu aktif yap
            document.getElementById('tab-' + tabName).classList.add('active');
            document.querySelector(`button[onclick="showTab('${tabName}')"]`).classList.add('active');
        }
        
        function updateBotList(activeBots) {
            const list = document.getElementById('bot-list');
            
            if (activeBots.length === 0) {
                list.innerHTML = '<p style="color: #aaa; text-align: center;">Aktif bot yok</p>';
                return;
            }
            
            let html = '';
            activeBots.forEach(bot => {
                const isSelected = selectedBot === bot;
                html += `
                    <div class="bot-item ${isSelected ? 'selected' : ''}" onclick="selectBot('${bot}')">
                        <span>${bot} ${isSelected ? '‚úì' : ''}</span>
                        <button class="btn btn-red" onclick="event.stopPropagation(); stopBot('${bot}')">KES</button>
                    </div>
                `;
            });
            
            list.innerHTML = html;
        }
        
        function selectBot(botName) {
            selectedBot = botName;
            socket.emit('select-bot', botName);
            showStatus(`‚úÖ ${botName} se√ßildi`, 'success');
            showTab('console');
        }
        
        function connectBot() {
            const host = document.getElementById('host').value.trim();
            const user = document.getElementById('username').value.trim();
            const ver = document.getElementById('version').value.trim();
            
            if (!host || !user || !ver) {
                showStatus('‚ùå T√ºm alanlarƒ± doldurun!', 'error');
                return;
            }
            
            socket.emit('start-bot', { host, user, ver });
            showStatus(`üîÑ ${user} baƒülanƒ±yor...`, 'success');
            showTab('console');
        }
        
        function stopBot(botName) {
            if (confirm(`${botName} botunu durdurmak istiyor musunuz?`)) {
                socket.emit('stop-bot', botName);
                if (selectedBot === botName) {
                    selectedBot = '';
                }
            }
        }
        
        function updateConsole(logs) {
            const consoleElement = document.getElementById('console');
            const logText = logs.join('<br>');
            consoleElement.innerHTML = logText;
            consoleElement.scrollTop = consoleElement.scrollHeight;
        }
        
        function sendMessage() {
            const msg = document.getElementById('message').value.trim();
            if (!selectedBot) {
                showStatus('‚ùå √ñnce bir bot se√ßin!', 'error');
                return;
            }
            
            if (!msg) return;
            
            socket.emit('send-chat', { bot: selectedBot, msg: msg });
            document.getElementById('message').value = '';
        }
        
        function updateStats(data) {
            document.getElementById('hp').textContent = Math.round(data.hp || 0);
            document.getElementById('food').textContent = Math.round(data.food || 0);
        }
        
        function updateInventory(inv) {
            const grid = document.getElementById('inventory-grid');
            if (!grid) return;
            
            let html = '';
            for (let i = 0; i < 45; i++) {
                const item = (inv || []).find(it => it.slot === i);
                html += `
                    <div class="slot" title="${item ? item.name : 'Bo≈ü'}">
                        ${item ? `
                            <img src="https://raw.githubusercontent.com/PrismarineJS/minecraft-assets/master/data/1.16.1/items/${item.name}.png"
                                 onerror="this.style.display='none'">
                        ` : ''}
                    </div>
                `;
            }
            grid.innerHTML = html;
        }
        
        function startMove(direction) {
            if (!selectedBot) {
                showStatus('‚ùå √ñnce bir bot se√ßin!', 'error');
                return;
            }
            socket.emit('control-move', { 
                bot: selectedBot, 
                direction: direction, 
                state: 'down' 
            });
        }
        
        function stopMove(direction) {
            if (!selectedBot) return;
            socket.emit('control-move', { 
                bot: selectedBot, 
                direction: direction, 
                state: 'up' 
            });
        }
        
        function jump() {
            if (!selectedBot) {
                showStatus('‚ùå √ñnce bir bot se√ßin!', 'error');
                return;
            }
            // Zƒ±pla ve hemen bƒ±rak
            socket.emit('control-move', { bot: selectedBot, direction: 'zipla', state: 'down' });
            setTimeout(() => {
                socket.emit('control-move', { bot: selectedBot, direction: 'zipla', state: 'up' });
            }, 200);
        }
        
        // Sayfa y√ºklendiƒüinde
        document.addEventListener('DOMContentLoaded', () => {
            console.log('AFK Client ba≈ülatƒ±ldƒ±');
        });
    </script>
</body>
    </html>

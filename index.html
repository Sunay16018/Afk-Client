<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>AFK Client</title>
    <style>
        * { margin: 0; padding: 0; box-sizing: border-box; }
        body { background: #0d1117; color: #c9d1d9; font-family: sans-serif; }
        
        .container { max-width: 1200px; margin: 0 auto; padding: 20px; }
        
        header { 
            background: #161b22; 
            padding: 20px; 
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            justify-content: space-between;
            align-items: center;
        }
        
        h1 { color: #2ecc71; }
        
        .connection-form {
            background: #161b22;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .input-group { margin-bottom: 10px; }
        input { 
            width: 100%; 
            padding: 10px; 
            background: #0d1117; 
            border: 1px solid #30363d; 
            color: white;
            border-radius: 5px;
            margin-bottom: 10px;
        }
        
        .btn {
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-weight: bold;
            margin-right: 10px;
        }
        
        .btn-connect { background: #238636; color: white; }
        .btn-stop { background: #da3633; color: white; }
        .btn-send { background: #1f6feb; color: white; }
        
        .console-container {
            background: #000;
            border-radius: 10px;
            margin-bottom: 20px;
            overflow: hidden;
        }
        
        .console-header {
            background: #161b22;
            padding: 15px;
            border-bottom: 1px solid #30363d;
        }
        
        #console {
            height: 300px; /* SABƒ∞T ORTA BOY */
            overflow-y: auto;
            padding: 15px;
            font-family: monospace;
            font-size: 14px;
        }
        
        .log-message {
            margin-bottom: 5px;
            padding: 5px;
            border-radius: 3px;
        }
        
        .log-info { color: #8b949e; }
        .log-success { color: #2ecc71; }
        .log-error { color: #ff4757; }
        .log-chat { color: #c9d1d9; }
        .log-warning { color: #ffa502; }
        
        .chat-input {
            display: flex;
            gap: 10px;
            padding: 15px;
            background: #161b22;
        }
        
        .chat-input input {
            flex: 1;
            margin-bottom: 0;
        }
        
        .stats {
            background: #161b22;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
            display: flex;
            gap: 30px;
        }
        
        .stat-item {
            display: flex;
            align-items: center;
            gap: 10px;
            font-size: 18px;
        }
        
        .inventory {
            background: #161b22;
            padding: 20px;
            border-radius: 10px;
            margin-bottom: 20px;
        }
        
        .inv-grid {
            display: grid;
            grid-template-columns: repeat(9, 1fr);
            gap: 5px;
            background: #8b8b8b;
            padding: 10px;
            border: 3px solid #373737;
            border-radius: 5px;
            max-width: 500px;
        }
        
        .slot {
            width: 40px;
            height: 40px;
            background: #8b8b8b;
            border: 2px solid #373737;
            position: relative;
            cursor: pointer;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .slot img {
            width: 32px;
            height: 32px;
            image-rendering: pixelated;
        }
        
        .count {
            position: absolute;
            bottom: 1px;
            right: 2px;
            font-size: 10px;
            color: white;
            text-shadow: 1px 1px black;
            font-weight: bold;
        }
        
        .item-menu {
            position: fixed;
            background: #161b22;
            border: 1px solid #30363d;
            border-radius: 5px;
            padding: 10px;
            z-index: 1000;
            display: none;
        }
        
        .item-menu button {
            display: block;
            width: 100%;
            padding: 8px;
            margin: 5px 0;
            background: #1f6feb;
            color: white;
            border: none;
            border-radius: 3px;
            cursor: pointer;
        }
    </style>
</head>
<body>
    <div class="container">
        <header>
            <h1>ü§ñ AFK Client</h1>
            <div id="status">üî¥ Baƒülantƒ± Yok</div>
        </header>
        
        <div class="connection-form">
            <input type="text" id="host" placeholder="Sunucu IP:Port" value="localhost:25565">
            <input type="text" id="username" placeholder="Bot ƒ∞smi" value="AFKBot">
            <input type="text" id="version" placeholder="S√ºr√ºm" value="1.16.5">
            <button class="btn btn-connect" onclick="connectBot()">üì° Baƒülan</button>
            <button class="btn btn-stop" onclick="stopBot()">üõë Durdur</button>
        </div>
        
        <div class="console-container">
            <div class="console-header">üìü Konsol</div>
            <div id="console"></div>
            <div class="chat-input">
                <input type="text" id="message" placeholder="Mesaj yaz... (Enter ile g√∂nder)" onkeypress="if(event.key=='Enter') sendMessage()">
                <button class="btn btn-send" onclick="sendMessage()">üì® G√∂nder</button>
            </div>
        </div>
        
        <div class="stats">
            <div class="stat-item">‚ù§Ô∏è Can: <span id="hp">-</span></div>
            <div class="stat-item">üçñ A√ßlƒ±k: <span id="food">-</span></div>
        </div>
        
        <div class="inventory">
            <h3>üéí Envanter</h3>
            <div class="inv-grid" id="inventory"></div>
        </div>
    </div>
    
    <div class="item-menu" id="itemMenu">
        <button onclick="itemAction('drop')">üóëÔ∏è At</button>
        <button onclick="itemAction('eat')">üçé Ye</button>
        <button onclick="itemAction('right')">üñ±Ô∏è Saƒü Tƒ±k</button>
        <button onclick="itemAction('left')">üñ±Ô∏è Sol Tƒ±k</button>
        <button onclick="hideMenu()">‚úñÔ∏è Kapat</button>
    </div>
    
    <script src="/socket.io/socket.io.js"></script>
    <script>
        let socket = null;
        let selectedSlot = null;
        let botData = null;
        
        function init() {
            socket = io();
            
            socket.on('connect', () => {
                document.getElementById('status').textContent = 'üü¢ Baƒülƒ±';
                document.getElementById('status').style.color = '#2ecc71';
                addLog('Sunucuya baƒülanƒ±ldƒ±', 'info');
            });
            
            socket.on('init_logs', (logs) => {
                logs.forEach(log => addLog(log.text, log.type));
            });
            
            socket.on('log', (data) => {
                addLog(data.text, data.type);
            });
            
            socket.on('bot_data', (data) => {
                botData = data;
                updateStats(data);
                updateInventory(data.inventory);
            });
            
            socket.on('disconnect', () => {
                document.getElementById('status').textContent = 'üî¥ Baƒülantƒ± Yok';
                document.getElementById('status').style.color = '#ff4757';
                addLog('Sunucu baƒülantƒ±sƒ± kesildi', 'error');
            });
            
            // ƒ∞lk log
            addLog('AFK Client ba≈ülatƒ±ldƒ±. Bot baƒülamak i√ßin bilgileri doldurun.', 'info');
        }
        
        function connectBot() {
            const host = document.getElementById('host').value;
            const username = document.getElementById('username').value;
            const version = document.getElementById('version').value;
            
            if (!host || !username) {
                addLog('IP ve kullanƒ±cƒ± adƒ± gerekli!', 'error');
                return;
            }
            
            socket.emit('start_bot', { host, username, version });
        }
        
        function stopBot() {
            socket.emit('stop_bot');
        }
        
        function sendMessage() {
            const input = document.getElementById('message');
            const message = input.value.trim();
            
            if (!message) {
                addLog('Mesaj yazƒ±n!', 'warning');
                return;
            }
            
            socket.emit('send_chat', { message });
            input.value = '';
        }
        
        function addLog(text, type = 'info') {
            const console = document.getElementById('console');
            const div = document.createElement('div');
            div.className = `log-message log-${type}`;
            
            const time = new Date().toLocaleTimeString('tr-TR');
            div.innerHTML = `<span style="color:#666">[${time}]</span> ${text}`;
            
            console.appendChild(div);
            console.scrollTop = console.scrollHeight;
            
            // √áok fazla log varsa temizle
            const logs = console.querySelectorAll('.log-message');
            if (logs.length > 100) {
                for (let i = 0; i < 20; i++) {
                    if (logs[i]) logs[i].remove();
                }
            }
        }
        
        function updateStats(data) {
            document.getElementById('hp').textContent = Math.round(data.hp);
            document.getElementById('food').textContent = Math.round(data.food);
        }
        
        function updateInventory(inventory) {
            const container = document.getElementById('inventory');
            container.innerHTML = '';
            
            for (let i = 0; i < 45; i++) {
                const slot = document.createElement('div');
                slot.className = 'slot';
                slot.dataset.slot = i;
                
                const item = inventory.find(it => it.slot === i);
                if (item) {
                    slot.innerHTML = `
                        <img src="https://raw.githubusercontent.com/InventivetalentDev/minecraft-assets/1.19.4/assets/minecraft/textures/item/${item.name}.png"
                             onerror="this.src='https://via.placeholder.com/32/555/fff?text=?'">
                        ${item.count > 1 ? `<span class="count">${item.count}</span>` : ''}
                    `;
                    slot.title = `${item.name} x${item.count}`;
                }
                
                slot.onclick = (e) => showItemMenu(e, i);
                container.appendChild(slot);
            }
        }
        
        function showItemMenu(e, slot) {
            selectedSlot = slot;
            const menu = document.getElementById('itemMenu');
            menu.style.display = 'block';
            menu.style.left = e.pageX + 'px';
            menu.style.top = e.pageY + 'px';
        }
        
        function hideMenu() {
            document.getElementById('itemMenu').style.display = 'none';
        }
        
        function itemAction(action) {
            if (selectedSlot === null) return;
            
            hideMenu();
            
            // Basit eylemler - sonra geli≈ütirilebilir
            if (action === 'drop') {
                socket.emit('drop_item', selectedSlot);
                addLog(`${selectedSlot}. slot e≈üyasƒ± atƒ±ldƒ±`, 'info');
            } else {
                addLog(`${action} i≈ülemi hen√ºz aktif deƒüil`, 'warning');
            }
            
            selectedSlot = null;
        }
        
        // Sayfa y√ºklendiƒüinde ba≈ülat
        window.onload = init;
    </script>
</body>
</html>

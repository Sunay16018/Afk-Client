<!DOCTYPE html>
<html>
<head>
    <meta charset="UTF-8">
    <title>AFK Client</title>
    <style>
        * { box-sizing: border-box; font-family: sans-serif; }
        body { background: #0d1117; color: #c9d1d9; margin: 0; height: 100vh; display: flex; flex-direction: column; }
        nav { display: flex; background: #161b22; border-bottom: 1px solid #30363d; height: 45px; }
        nav button { flex: 1; border: none; background: none; color: #8b949e; cursor: pointer; font-weight: bold; }
        nav button.active { color: #2ecc71; border-bottom: 2px solid #2ecc71; }
        .tab { display: none; flex: 1; padding: 10px; overflow-y: auto; }
        .tab.active { display: block; }
        
        .card { background: #161b22; padding: 15px; border-radius: 8px; border: 1px solid #30363d; margin-bottom: 10px; }
        input { background: #0d1117; border: 1px solid #30363d; color: #fff; padding: 10px; border-radius: 6px; width: 100%; margin-bottom: 10px; }
        .btn { padding: 10px 15px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; background: #1f6feb; }
        .btn.success { background: #238636; }
        .btn.danger { background: #da3633; }
        
        #bot-list { margin-top: 10px; }
        .bot-item { display: flex; justify-content: space-between; align-items: center; padding: 10px; background: #161b22; border: 1px solid #30363d; margin-top: 8px; border-radius: 8px; cursor: pointer; }
        .bot-item.selected { border-color: #2ecc71; }
        
        #console { height: 250px; background: #000; color: #2ecc71; padding: 10px; overflow-y: auto; font-family: monospace; border-radius: 5px; border: 1px solid #30363d; margin-bottom: 10px; }
        .input-group { display: flex; gap: 10px; }
        
        #stats { text-align: center; margin-bottom: 10px; font-size: 16px; }
        .inv-grid { display: grid; grid-template-columns: repeat(9, 1fr); gap: 4px; background: #8b8b8b; padding: 10px; border: 3px solid #373737; border-radius: 2px; width: fit-content; margin: 0 auto; }
        .slot { width: 40px; height: 40px; background: #8b8b8b; border: 2px outset #c6c6c6; position: relative; cursor: pointer; display: flex; align-items: center; justify-content: center; }
        .slot img { width: 32px; height: 32px; image-rendering: pixelated; }
        .count { position: absolute; bottom: 2px; right: 3px; font-size: 11px; color: white; text-shadow: 1px 1px 2px #000; font-weight: bold; }
        
        .movement { display: grid; grid-template-columns: repeat(3, 1fr); gap: 10px; margin: 15px auto; max-width: 250px; }
        .move-btn { padding: 12px; border: none; border-radius: 6px; cursor: pointer; font-weight: bold; color: white; background: #238636; }
        .move-btn.jump { background: #d29922; }
        
        .switch { position: relative; display: inline-block; width: 50px; height: 24px; }
        .switch input { opacity: 0; width: 0; height: 0; }
        .slider { position: absolute; cursor: pointer; top: 0; left: 0; right: 0; bottom: 0; background: #30363d; border-radius: 24px; }
        .slider:before { position: absolute; content: ""; height: 18px; width: 18px; left: 3px; bottom: 3px; background: white; border-radius: 50%; transition: .3s; }
        input:checked + .slider { background: #2ecc71; }
        input:checked + .slider:before { transform: translateX(26px); }
    </style>
</head>
<body>
    <nav>
        <button class="tab-btn active" onclick="showTab('bots')">BOTLAR</button>
        <button class="tab-btn" onclick="showTab('console')">KONSOL</button>
        <button class="tab-btn" onclick="showTab('inv')">ENVANTER</button>
        <button class="tab-btn" onclick="showTab('settings')">AYARLAR</button>
    </nav>

    <div class="tab active" id="tab-bots">
        <div class="card">
            <input id="host" placeholder="IP:Port (play.server.com:25565)">
            <input id="username" placeholder="Bot Adƒ±">
            <input id="version" placeholder="S√ºr√ºm (1.16.5)" value="1.16.5">
            <button class="btn success" onclick="connect()">BAƒûLAN</button>
        </div>
        <div id="bot-list"></div>
    </div>

    <div class="tab" id="tab-console">
        <div id="console">[Sƒ∞STEM] Bir bot baƒülayƒ±n...</div>
        <div class="input-group">
            <input id="message" placeholder="Mesaj...">
            <button class="btn" onclick="sendMsg()">G√ñNDER</button>
        </div>
    </div>

    <div class="tab" id="tab-inv">
        <div id="stats">‚ù§Ô∏è 0 | üçñ 0</div>
        <div class="inv-grid" id="inventory"></div>
    </div>

    <div class="tab" id="tab-settings">
        <div class="card">
            <h3>‚õèÔ∏è KAZMA MODU</h3>
            <div style="display: flex; align-items: center; gap: 10px;">
                <label class="switch">
                    <input type="checkbox" id="dig-toggle" onchange="toggleDig()">
                    <span class="slider"></span>
                </label>
                <span id="dig-status">Kapalƒ±</span>
            </div>
        </div>
        
        <div class="card">
            <h3>üéÆ HAREKET KONTROLLERƒ∞</h3>
            <div class="movement">
                <div></div>
                <button class="move-btn" onmousedown="move('ileri', 'down')" onmouseup="move('ileri', 'up')">ƒ∞LERƒ∞</button>
                <div></div>
                <button class="move-btn" onmousedown="move('sol', 'down')" onmouseup="move('sol', 'up')">SOL</button>
                <button class="move-btn" onmousedown="move('geri', 'down')" onmouseup="move('geri', 'up')">GERƒ∞</button>
                <button class="move-btn" onmousedown="move('sag', 'down')" onmouseup="move('sag', 'up')">SAƒû</button>
                <button class="move-btn jump" onclick="jump()">ZIPLA</button>
            </div>
        </div>
    </div>

    <script src="/socket.io/socket.io.js"></script>
    <script>
        const socket = io();
        let selectedBot = '';
        
        socket.on('update', (data) => {
            // Bot listesi
            const list = document.getElementById('bot-list');
            list.innerHTML = data.active.map(bot => `
                <div class="bot-item ${selectedBot===bot?'selected':''}" onclick="select('${bot}')">
                    <span>${bot} ${selectedBot===bot?'(SE√áƒ∞Lƒ∞)':''}</span>
                    <button class="btn danger" onclick="event.stopPropagation(); disconnect('${bot}')">KES</button>
                </div>
            `).join('');
            
            // Konsol
            if (selectedBot && data.logs[selectedBot]) {
                document.getElementById('console').innerHTML = data.logs[selectedBot].join('<br>');
                document.getElementById('console').scrollTop = 9999;
            }
            
            // ƒ∞statistikler ve envanter
            if (selectedBot && data.data[selectedBot]) {
                const d = data.data[selectedBot];
                document.getElementById('stats').innerHTML = `‚ù§Ô∏è ${Math.round(d.hp)} | üçñ ${Math.round(d.food)}`;
                
                let inv = '';
                for (let i = 0; i < 45; i++) {
                    const it = d.inv.find(x => x.s === i);
                    inv += `<div class="slot" onclick="drop(${i})">`;
                    if (it) inv += `<img src="https://raw.githubusercontent.com/PrismarineJS/minecraft-assets/master/data/1.16.1/items/${it.n}.png" onerror="this.style.display='none'"><span class="count">${it.c>1?it.c:''}</span>`;
                    inv += `</div>`;
                }
                document.getElementById('inventory').innerHTML = inv;
            }
        });
        
        function showTab(tab) {
            document.querySelectorAll('.tab').forEach(t => t.classList.remove('active'));
            document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
            document.getElementById('tab-'+tab).classList.add('active');
            document.querySelector(`button[onclick="showTab('${tab}')"]`).classList.add('active');
        }
        
        function select(bot) {
            selectedBot = bot;
            socket.emit('select', bot);
        }
        
        function connect() {
            const host = document.getElementById('host').value;
            const user = document.getElementById('username').value;
            const ver = document.getElementById('version').value;
            if (!host || !user || !ver) return alert('T√ºm alanlarƒ± doldurun!');
            socket.emit('start', { host, user, ver });
            selectedBot = user;
            showTab('console');
        }
        
        function disconnect(bot) {
            if (confirm(bot + ' botunu durdurmak istiyor musunuz?')) {
                socket.emit('stop', bot);
                if (selectedBot === bot) selectedBot = '';
            }
        }
        
        function sendMsg() {
            const msg = document.getElementById('message').value;
            if (!selectedBot || !msg) return;
            socket.emit('chat', { bot: selectedBot, msg });
            document.getElementById('message').value = '';
        }
        
        function toggleDig() {
            const toggle = document.getElementById('dig-toggle');
            if (!selectedBot) {
                toggle.checked = false;
                return alert('√ñnce bir bot se√ßin!');
            }
            socket.emit('dig', { bot: selectedBot, action: toggle.checked ? 'start' : 'stop' });
            document.getElementById('dig-status').innerText = toggle.checked ? 'A√ßƒ±k' : 'Kapalƒ±';
        }
        
        function move(dir, state) {
            if (!selectedBot) return;
            socket.emit('move', { bot: selectedBot, dir, state });
        }
        
        function jump() {
            if (!selectedBot) return;
            socket.emit('move', { bot: selectedBot, dir: 'zipla', state: 'down' });
            setTimeout(() => socket.emit('move', { bot: selectedBot, dir: 'zipla', state: 'up' }), 200);
        }
        
        function drop(slot) {
            if (!selectedBot) return alert('√ñnce bir bot se√ßin!');
            if (confirm('E≈üyayƒ± atmak istiyor musunuz?')) {
                // E≈üya atma i≈ülemi (basit)
                alert('E≈üya atma √∂zelliƒüi aktif');
            }
        }
    </script>
</body>
</html>